(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["basedirs"],{"166c":function(t,e,r){},"2c6e":function(t,e,r){},"41af":function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("header",[r("h2",[t._v(t._s(t.labels.plural))])]),r("BasedirsList",{attrs:{records:t.records,labels:t.labels}})],1)},n=[],s=r("c17b"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-form",{class:{"form--preferences":!0,"is-loading":t.isLoading}},[t.isLoading?t.isLoading||0!==t.records.length?t.isLoading?r("div",{key:"basedirs-content",staticClass:"content-wrap is-loading"},[r("font-awesome-icon",{attrs:{icon:"circle-notch",spin:""}}),t._v("\n     "),r("span",[t._v(t._s(t.labels.loading))])],1):r("div",{key:"basedirs-content",staticClass:"content-wrap is-failed"},[r("font-awesome-icon",{attrs:{icon:"expand"}}),t._v("\n     "),r("span",[t._v(t._s(t.labels.isFailed))])],1):r("div",{key:"basedirs-content",staticClass:"content-wrap is-empty"},[r("font-awesome-icon",{attrs:{icon:"expand"}}),t._v("\n     "),r("span",[t._v(t._s(t.labels.empty))])],1):r("div",{key:"basedirs-content",staticClass:"content-wrap is-ready"},t._l(t.records,function(t){return r("basedir-row-edit",{key:t.id,attrs:{basedir:t,"is-deletable":"default"!==t.id}})}),1),r("basedir-row-add",{attrs:{"tab-offset":3*t.records.length}})],1)},o=[],c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-form-row",{class:{"form-row--basedir-edit":!0,"is-updating":t.isUpdating,"is-modified":t.isModified,"is-deleting":t.isDeleting}},[r("b-input-group",{class:{"input-group--basedir-edit":!0},attrs:{role:"tabpanel"}},[r("b-form-input",{staticClass:"basedir",attrs:{state:t.isValid,type:"text",required:"",placeholder:"Path",tabindex:"0"},on:{keyup:t.touch,change:t.touch},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}}),t.isModified?r("b-input-group-append",[r("b-button",{staticClass:"btn--update",attrs:{type:"submit.prevent",variant:t.isModified?"outline-info":"outline-secondary",disabled:!t.isModified,title:"Update directory reference",tabindex:0},on:{click:function(e){return e.preventDefault(),t.onUpdateBasedir(e)}}},[t.isUpdating?r("font-awesome-icon",{key:"status-icon",attrs:{spin:"",icon:["fa","circle-notch"]}}):r("font-awesome-icon",{key:"status-icon",attrs:{icon:["fa","check"]}})],1)],1):t._e()],1),r("b-button-group",{staticClass:"button-group--extras"},[r("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}},{name:"clipboard",rawName:"v-clipboard:copy",value:t.currentValue,expression:"currentValue",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopyToClipboard,expression:"onCopyToClipboard",arg:"success"}],staticClass:"btn--copy-dir",attrs:{variant:"outline-info",title:"Copy to clipboard"}},[r("font-awesome-icon",{attrs:{icon:["fa","clone"]}})],1),r("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn--open-dir",attrs:{variant:"outline-info",title:"Open in file manager"},on:{click:function(e){return e.preventDefault(),t.onOpenDirectory(e)}}},[r("font-awesome-icon",{attrs:{icon:["fa","folder-open"]}})],1)],1),r("b-button",{staticClass:"btn--delete",attrs:{type:"submit.prevent",variant:t.basedir.id===t.isDeletable?"outline-secondary":"outline-warning",disabled:!t.isDeletable,title:t.isDeletable?"Delete this directory":"Cannot delete the default directory",tabindex:0},on:{click:function(e){return e.preventDefault(),t.onDeleteBasedir(e)}}},[t.isDeleting?r("font-awesome-icon",{key:"status-icon",attrs:{spin:"",icon:["fa","circle-notch"]}}):r("font-awesome-icon",{key:"status-icon",attrs:{icon:["fa","trash-alt"]}})],1),t.errors?t._e():r("div",{class:{confirmation:!0,visible:t.notfound[t.currentValue]}},[t._v("\n    This dir does not exist. Would you like to create it?\n    "),r("a",{staticClass:"yes",attrs:{title:"Create directory"},on:{click:function(e){return e.stopPropagation(),t.updateBasedir(t.currentValue)}}},[t._v("Yes")]),t._v("\n    |\n    "),r("a",{staticClass:"no",attrs:{title:"Try a different dir"},on:{click:function(e){e.stopPropagation(),t.notfound[t.currentValue]=0}}},[t._v("No")])]),t.errors?r("div",{staticClass:"invalid-feedback d-block"},[t._v("\n    "+t._s(t.errors)+"\n  ")]):t._e()],1)},d=[],u=(r("96cf"),r("3b8d")),l=r("1301"),p=l["a"].ActionTypes,h={name:"BasedirRowEdit",props:{basedir:{type:Object,required:!0},isDeletable:{type:Boolean,required:!0,default:!0}},data:function(){return{currentValue:this.basedir.attributes.basedir,errors:"",notfound:{},isModified:!1,isUpdating:!1,isDeleting:!1,alertShow:!1,alertContent:"content",alertDismissible:!0,alertVariant:"warning"}},computed:{isValid:function(){return""===this.errors&&null}},methods:{showAlert:function(t){"string"===typeof t?this.alertContent=t:(this.alertVariant=t.variant||this.alertVariant,this.alertDismissible=t.dismissible||this.alertDismissible,this.alertContent=t.content||this.alertContent),this.alertShow=!0},touch:function(){var t=this.currentValue;this.isModified=t&&t!==this.basedir.attributes.basedir,this.errors=""},onUpdateBasedir:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.currentValue,this.basedir.id&&e){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,this.$store.dispatch(p.CHECK_DIRECTORY,e);case 6:r=t.sent,r>200?this.$set(this.notfound,e,1):(this.$delete(this.notfound,e),this.updateBasedir(e)),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](3),console.log(t.t0);case 13:case"end":return t.stop()}},t,this,[[3,10]])}));function e(){return t.apply(this,arguments)}return e}(),updateBasedir:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.isModified){t.next=2;break}return t.abrupt("return");case 2:return r={id:this.basedir.id,type:"basedirs",attributes:{basedir:e,nickname:this.basedir.id}},t.prev=3,this.isUpdating=!0,t.next=7,this.$store.dispatch(p.UPDATE,{record:this.basedir,recordData:r});case 7:this.isModified=!1,this.isUpdating=!1,this.$delete(this.notfound,this.currentValue),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](3),this.isUpdating=!1,console.error("fail",t.t0);case 16:case"end":return t.stop()}},t,this,[[3,12]])}));function e(e){return t.apply(this,arguments)}return e}(),onDeleteBasedir:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.isDeleting=!0,t.next=4,this.$store.dispatch(p.DELETE,this.basedir.id);case 4:this.errors="",this.isModified=!1,this.isDeleting=!1,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),this.errors=t.t0,this.isDeleting=!1;case 13:case"end":return t.stop()}},t,this,[[0,9]])}));function e(){return t.apply(this,arguments)}return e}(),onCopyToClipboard:function(t){console.log("Copied to clipboard:",t.text)},onOpenDirectory:function(){this.$store.dispatch(p.OPEN_DIRECTORY,this.currentValue)}}},f=h,b=(r("4df4"),r("2877")),v=Object(b["a"])(f,c,d,!1,null,"36439058",null),m=v.exports,g=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-form-row",{class:{"form-row--basedir-add":!0,"is-updating":t.isUpdating}},[r("b-input-group",{class:{"input-group--basedir-edit":!0},attrs:{role:"tabpanel"}},[r("b-form-input",{staticClass:"basedir",attrs:{type:"text",placeholder:"Input directory...",state:t.inputState("add"),tabindex:"0"},on:{keyup:function(e){return t.touch("add")},change:function(e){return t.touch("add")}},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}}),r("b-input-group-append",[r("b-button",{staticClass:"btn--add",attrs:{type:"submit.prevent",variant:t.touched["add"]?"outline-info":"outline-secondary",disabled:!t.touched["add"],title:t.currentValue?"Add directory":"First, input some directory!",tabindex:"0"},on:{click:function(e){return e.preventDefault(),t.onAddBasedir(e)}}},[r("font-awesome-icon",{attrs:{icon:["fa","plus"]}})],1)],1)],1),r("div",{class:{confirmation:!0,visible:t.notfound[t.currentValue]}},[t._v("\n    This dir does not exist. Would you like to create it?\n    "),r("a",{staticClass:"yes",attrs:{title:"Create directory"},on:{click:function(e){return e.stopPropagation(),t.createDir(t.currentValue)}}},[t._v("Yes")]),t._v("\n    |\n    "),r("a",{staticClass:"no",attrs:{title:"Try a different dir"},on:{click:function(e){e.stopPropagation(),t.notfound[t.currentValue]=0}}},[t._v("No")])]),r("div",{staticClass:"invalid-feedback d-block"},[t._v("\n    "+t._s(t.errors["add"]||" ")+"\n  ")])],1)},y=[],w=(r("c5f6"),l["a"].ActionTypes),C={name:"BasedirRowEdit",props:{tabOffset:{type:Number,required:!0}},data:function(){return{isUpdating:!1,currentValue:"",errors:{},touched:{},notfound:{},alertShow:!1,alertContent:"content",alertDismissible:!0,alertVariant:"warning"}},computed:{},methods:{showAlert:function(t){"string"===typeof t?this.alertContent=t:(this.alertVariant=t.variant||this.alertVariant,this.alertDismissible=t.dismissible||this.alertDismissible,this.alertContent=t.content||this.alertContent),this.alertShow=!0},touch:function(t){this.currentValue?(this.$set(this.touched,t,!0),this.$delete(this.errors,t)):(this.$delete(this.touched,t),this.$delete(this.errors,t))},inputState:function(t){return"undefined"===typeof this.errors[t]?null:"no error"===this.errors[t]},onAddBasedir:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.currentValue,e){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,this.$store.dispatch(w.CHECK_DIRECTORY,e);case 6:r=t.sent,r>=400?this.$set(this.notfound,e,1):(this.createDir(e),this.$delete(this.notfound,e)),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](3),console.error("Could not add Basedir",t.t0);case 13:case"end":return t.stop()}},t,this,[[3,10]])}));function e(){return t.apply(this,arguments)}return e}(),createDir:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$store.dispatch(w.CREATE,{attributes:{basedir:e}});case 3:this.$set(this.touched,"add",!0),this.$delete(this.errors,"add"),this.$delete(this.notfound,this.currentValue),this.currentValue="",t.next=14;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0),this.$set(this.errors,"add",t.t0.data.errors[0].title||t.t0.statusText),this.$delete(this.touched,"add");case 14:case"end":return t.stop()}},t,this,[[0,9]])}));function e(e){return t.apply(this,arguments)}return e}()}},k=C,x=(r("8b68"),Object(b["a"])(k,g,y,!1,null,"65f0b9e2",null)),_=x.exports,D={name:"BasedirsList",components:{BasedirRowEdit:m,BasedirRowAdd:_},props:{records:{required:!0,type:Array},isLoading:{required:!1,type:Boolean,default:!1},isFailed:{required:!1,type:String,default:""},labels:{required:!1,type:Object,default:function(){return{title:"Items",singular:"Item",plural:"Items",empty:"Found no records",loading:"Loading...",error:"Failed to load."}}}},data:function(){return{}}},V=D,$=(r("700c"),Object(b["a"])(V,a,o,!1,null,"b268e43a",null)),R=$.exports,B={name:s["a"].moduleName,components:{BasedirsList:R},computed:{records:function(){return this.$store.state[s["a"].namespace].records},labels:function(){return s["a"].labels}}},E=B,O=(r("c88f"),Object(b["a"])(E,i,n,!1,null,"d3d39202",null));e["default"]=O.exports},"4df4":function(t,e,r){"use strict";var i=r("2c6e"),n=r.n(i);n.a},"700c":function(t,e,r){"use strict";var i=r("c849"),n=r.n(i);n.a},"8b68":function(t,e,r){"use strict";var i=r("d231"),n=r.n(i);n.a},c849:function(t,e,r){},c88f:function(t,e,r){"use strict";var i=r("166c"),n=r.n(i);n.a},d231:function(t,e,r){}}]);
//# sourceMappingURL=basedirs.4beee15b.js.map