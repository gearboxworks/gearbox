(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["projects"],{"2d1f":function(t,e,o){t.exports=o("b606")},7226:function(t,e,o){},"8dbf":function(t,e,o){"use strict";var a=o("7226"),s=o.n(a);s.a},"9c60":function(t,e,o){var a=o("63b6"),s=o("13c8")(!0);a(a.S,"Object",{entries:function(t){return s(t)}})},acca:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-container",[o("b-card-group",{attrs:{deck:""}},t._l(t.projects,function(e,a){return o("b-card",{key:e.path,staticClass:"card--project",attrs:{to:{path:"/project/"+e.hostname}}},[o("project-details",{attrs:{storedProject:e,projectIndex:a}}),Object.entries(e.stack).length?o("div",{attrs:{slot:"footer"},slot:"footer"},[o("project-stack",{attrs:{projectHostname:e.hostname,projectStack:e.stack,projectIndex:a}})],1):t._e()],1)}),1)],1)},s=[],r=o("cebc"),n=o("2f62"),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{class:{"showing-details":t.showingDetails,"not-showing-details":!t.showingDetails}},[o("b-form",[o("b-form-group",{staticClass:"hostname-group",attrs:{id:"hostname-group-"+t.projectIndex,label:"","label-for":"hostname-input-"+t.projectIndex,description:t.showingDetails?"Hostname":""}},[o("b-form-input",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottomright",modifiers:{hover:!0,bottomright:!0}}],staticClass:"hostname-input",attrs:{id:"hostname-input-"+t.projectIndex,type:"text",size:"lg",title:t.showingDetails?"":"Expand details",required:"",placeholder:""},on:{change:t.maybeSubmit,click:t.showDetails},model:{value:t.hostname,callback:function(e){t.hostname=e},expression:"hostname"}})],1),o("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"titlebar-icon titlebar-icon--state",attrs:{target:"_blank",href:"#",title:t.storedProject.enabled?"Stop all services":"Run all services"},on:{click:function(e){return e.preventDefault(),t.onRunStop(e)}}},[o("font-awesome-icon",{attrs:{icon:["fa",t.storedProject.enabled?"stop-circle":"play-circle"]}})],1),o("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],class:["titlebar-icon","titlebar-icon--frontend",{"is-disabled":t.enabled}],attrs:{target:"_blank",href:"http://"+t.hostname+"/",title:"Open Frontend"}},[o("font-awesome-icon",{attrs:{icon:["fa","home"]}})],1),o("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],class:["titlebar-icon","titlebar-icon--dashboard",{"is-disabled":t.enabled}],attrs:{target:"_blank",href:"http://"+t.hostname+"/wp-admin",title:"Open Dashboard"}},[o("font-awesome-icon",{attrs:{icon:["fa","tachometer-alt"]}})],1),o("b-collapse",{attrs:{id:t.projectBase+"_advanced",role:"tabpanel",visible:t.showingDetails}},[o("b-form-group",{attrs:{id:t.projectBase+"location-group","label-for":t.projectBase+"location-input",label:"",description:"Location"}},[o("b-form-input",{staticClass:"location-input",attrs:{disabled:"",id:t.projectBase+"location-input",value:t.resolvePath(t.baseDir,t.path)}}),o("a",{class:["cog-icon"],attrs:{target:"_blank",id:t.projectBase+"change-location",href:"#",title:"Change location"},on:{click:function(t){t.preventDefault()}}},[o("font-awesome-icon",{attrs:{icon:["fa","cog"]}})],1)],1),o("b-popover",{ref:t.projectBase+"location-popover",attrs:{target:t.projectBase+"change-location",container:t.projectBase+"-advanced",triggers:"focus",placement:"bottom"}},[o("template",{slot:"title"},[o("b-button",{staticClass:"close",attrs:{"aria-label":"Close"},on:{click:function(e){return t.onClosePopoverFor(t.projectBase+"location-group")}}},[o("span",{staticClass:"d-inline-block",attrs:{"aria-hidden":"true"}},[t._v("Ã—")])]),t._v("\n          Change location\n        ")],1),o("b-form-group",{attrs:{id:"basedirGroup1",label:"Base directory","label-for":"basedirInput",description:""}},[o("b-form-select",{attrs:{required:"",options:this.$store.getters.baseDirsAsOptions},on:{change:t.maybeSubmit},model:{value:t.baseDir,callback:function(e){t.baseDir=e},expression:"baseDir"}})],1),o("b-form-group",{attrs:{id:"pathGroup",label:"Path:","label-for":"dirNameInput",description:""}},[o("b-form-input",{attrs:{id:"dirNameInput",type:"text",required:"",placeholder:""},on:{change:t.maybeSubmit},model:{value:t.path,callback:function(e){t.path=e},expression:"path"}})],1)],2),o("b-form-group",{attrs:{id:"notesGroup",label:"","label-for":"notesInput",description:"(will be visible only here)"}},[o("b-form-textarea",{attrs:{id:"textarea",placeholder:"Notes...",rows:"3","max-rows":"6"},on:{change:t.maybeSubmit},model:{value:t.notes,callback:function(e){t.notes=e},expression:"notes"}})],1),o("b-form-select",{staticClass:"add-stack",attrs:{required:!0,disabled:!t.hasUnusedStacks},on:{change:t.addProjectStack},model:{value:t.selectedService,callback:function(e){t.selectedService=e},expression:"selectedService"}},[o("option",{attrs:{value:"",disabled:""}},[t._v(t._s(t.hasUnusedStacks?"Add Stack...":"No more stacks to add"))]),t._l(t.stacksNotUnusedInProject,function(e,a){return o("option",{key:a,domProps:{value:a}},[t._v(t._s(a.replace("gearbox.works/","")))])})],2)],1)],1)],1)},c=[],l=(o("a481"),o("2d1f")),d=o.n(l),p=(o("c5f6"),{name:"ProjectDetails",props:{storedProject:{type:Object,required:!0},projectIndex:{type:Number,required:!0}},data:function(){return Object(r["a"])({},this.storedProject,{showingDetails:!1,selectedService:""})},computed:Object(r["a"])({},Object(n["b"])(["groupProjectStacks"]),{projectBase:function(){return this.escAttr(this.hostname)+"-"},hasUnusedStacks:function(){return d()(this.stacksNotUnusedInProject).length>0},stacksNotUnusedInProject:function(){var t={},e=this.groupProjectStacks(this.stack);for(var o in this.$store.state.gearStacks){var a=this.$store.state.gearStacks[o];"undefined"===typeof e[a]&&(t[a]=this.$store.state.gearStacks[a])}return t}}),methods:{escAttr:function(t){return t.replace(/\//g,"-").replace(/\./g,"-")},resolvePath:function(t,e){return"undefined"!==typeof this.$store.state.baseDirs[t]?this.$store.state.baseDirs[t].text+"/"+e:""},showDetails:function(){this.showingDetails=!0},maybeSubmit:function(t){this.$store.dispatch("updateProject",{hostname:this.storedProject.hostname,project:this.$data}).then(function(){})},onRunStop:function(){this.$store.dispatch("changeProjectState",{projectHostname:this.storedProject.hostname,isEnabled:!this.enabled})},onClosePopoverFor:function(t){this.$root.$emit("bv::popover::hide",t)},addProjectStack:function(t){this.selectedService="",this.$store.dispatch("addProjectStack",{projectHostname:this.hostname,stackName:t})}}}),u=p,b=(o("8dbf"),o("2877")),h=Object(b["a"])(u,i,c,!1,null,"5a606cda",null),f=h.exports,m=o("3983"),j={name:"ProjectList",components:{ProjectDetails:f,ProjectStack:m["default"]},computed:Object(r["a"])({},Object(n["c"])(["projects","baseDirs"])),mounted:function(){this.$store.dispatch("loadProjectHeaders"),this.$store.dispatch("loadBaseDirs"),this.$store.dispatch("loadGears")}},v=j,g=(o("d719"),Object(b["a"])(v,a,s,!1,null,"b699895e",null));e["default"]=g.exports},b606:function(t,e,o){o("9c60"),t.exports=o("584a").Object.entries},d719:function(t,e,o){"use strict";var a=o("dc5d"),s=o.n(a);s.a},dc5d:function(t,e,o){}}]);
//# sourceMappingURL=projects.a63c00c9.js.map