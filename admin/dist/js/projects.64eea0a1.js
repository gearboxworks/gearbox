(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["projects","projectstack"],{"055b":function(t,e,r){t.exports=r.p+"img/python.51c2eab2.svg"},"090e":function(t,e,r){t.exports=r.p+"img/nodejs.94cafb0d.svg"},"0baa":function(t,e,r){"use strict";const o=r("df7c"),s=r("4845"),a=r("d40f"),n=r("6d1c"),i=100,c=/[\u0000-\u001f\u0080-\u009f]/g,p=/^\.+/,l=(t,e={})=>{if("string"!==typeof t)throw new TypeError("Expected a string");const r=void 0===e.replacement?"!":e.replacement;if(a().test(r)&&c.test(r))throw new Error("Replacement string cannot contain reserved filename characters");return t=t.replace(a(),r),t=t.replace(c,r),t=t.replace(p,r),r.length>0&&(t=s(t,r),t=t.length>1?n(t,r):t),t=a.windowsNames().test(t)?t+r:t,t=t.slice(0,i),t};l.path=((t,e)=>{return t=o.resolve(t),o.join(o.dirname(t),l(o.basename(t),e))}),t.exports=l},"0d9a":function(t,e,r){"use strict";var o=r("46ce"),s=r.n(o);s.a},"11e9":function(t,e,r){var o=r("52a7"),s=r("4630"),a=r("6821"),n=r("6a99"),i=r("69a8"),c=r("c69a"),p=Object.getOwnPropertyDescriptor;e.f=r("9e1e")?p:function(t,e){if(t=a(t),e=n(e,!0),c)try{return p(t,e)}catch(r){}if(i(t,e))return s(!o.f.call(t,e),t[e])}},1456:function(t,e,r){},1540:function(t,e,r){t.exports=r.p+"img/php.fa78b345.svg"},"1b4d":function(t,e,r){t.exports=r.p+"img/flask.318d58cb.svg"},"2d1f":function(t,e,r){t.exports=r("b606")},"319f":function(t,e,r){t.exports=r.p+"img/rails.2db29782.svg"},"31e8":function(t,e,r){var o={"./angular.svg":"a230","./apache.svg":"b77f","./codeigniter.svg":"7939","./django.svg":"c6da","./drupal.svg":"a88c","./elasticsearch.svg":"81bb","./flask.svg":"1b4d","./joomla.svg":"5390","./laravel.svg":"41c8","./logo.svg":"9b19","./mariadb.svg":"613e","./memcached.svg":"a0ba","./mysql.svg":"6c4c","./nginx.svg":"c502","./nodejs.svg":"090e","./perl.svg":"c44f","./php.svg":"1540","./python.svg":"055b","./rails.svg":"319f","./react.svg":"b2e9","./redis.svg":"8bcb","./ruby.svg":"9401","./wordpress.svg":"ee3c"};function s(t){var e=a(t);return r(e)}function a(t){var e=o[t];if(!(e+1)){var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}return e}s.keys=function(){return Object.keys(o)},s.resolve=a,t.exports=s,s.id="31e8"},3983:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"project-stack-list",attrs:{role:"tablist",id:t.projectBase+"stack"}},t._l(t.groupProjectStacks(t.projectStack),function(e,s,a){return o("div",{key:s,staticClass:"project-stack"},[o("h2",{staticClass:"stack-title"},[t._v(t._s(s.replace("gearbox.works/","")))]),o("b-button",{staticClass:"js-remove-stack",attrs:{tabindex:100*t.projectIndex+10*a,size:"sm",variant:"outline-secondary","aria-label":"Remove this stack from project",title:"Remove this stack from project"},on:{click:function(e){return e.preventDefault(),t.removeProjectStack(s)}}},[t._v("×")]),o("ul",{staticClass:"service-list"},t._l(t.stackServices(s),function(n,i,c){return o("li",{key:t.projectBase+i,staticClass:"service-item",attrs:{id:t.projectBase+i,tabindex:100*t.projectIndex+10*a+c+1}},[e[i]&&e[i].program?o("img",{staticClass:"service-program",attrs:{src:r("31e8")("./"+e[i].program+".svg")}}):o("font-awesome-icon",{attrs:{icon:["fa","expand"]}}),o("h6",{staticClass:"service-role"},[t._v(t._s(t.stackRoles(s)[i].label))]),o("b-tooltip",{key:e[i]?e[i].service_id:null,attrs:{triggers:"hover",target:t.projectBase+i,title:t.programTooltip(e[i])}}),o("b-popover",{ref:t.projectBase+i+"-popover",refInFor:!0,attrs:{target:t.projectBase+i,container:t.projectHostname+"stack",triggers:"focus",placement:"bottom"}},[o("template",{slot:"title"},[o("b-button",{staticClass:"close",attrs:{"aria-label":"Close"},on:{click:function(e){return t.onClosePopoverFor(t.projectBase+i)}}},[o("span",{staticClass:"d-inline-block",attrs:{"aria-hidden":"true"}},[t._v("×")])]),t._v("\n            Change service\n          ")],1),o("div",[o("label",{attrs:{for:t.projectBase+i+"_input"}},[t._v("\n            "+t._s(t.stackRoles(s)[i]?t.stackRoles(s)[i].program:"")+":\n            ")]),o("b-form-select",{attrs:{id:t.projectBase+i+"_input",value:e[i]?e[i].service_id:null,tabindex:100*t.projectIndex+10*a+c+9},on:{change:function(e){return t.changeProjectService(i,e)}}},[t.$store.state.gearServices[i].default?t._e():o("option",{attrs:{value:""}},[t._v("Do not run this service")]),o("option",{attrs:{disabled:"",value:""}},[t._v("Select service...")]),t._l(t.optionGroups(n.options),function(e,r){return o("optgroup",{key:r,attrs:{label:r}},t._l(e,function(e){return o("option",{key:e,domProps:{value:n.org+"/"+e}},[t._v(t._s(e))])}),0)})],2)],1)],2)],1)}),0)],1)}),0)},s=[],a=(r("28a5"),r("a481"),r("cebc")),n=(r("c5f6"),r("2f62")),i={name:"ProjectStack",props:{projectHostname:{type:String,required:!0},projectStack:{type:Object,required:!0},projectIndex:{type:Number,required:!0}},data:function(){return{}},components:{},computed:Object(a["a"])({},Object(n["b"])(["groupProjectStacks","stackRoles","stackServices"]),{projectBase:function(){return this.escAttr(this.projectHostname)+"-"},project:function(){return this.$store.getters.projectBy("hostname",this.projectHostname)}}),methods:{escAttr:function(t){return t.replace(/\//g,"-").replace(/\./g,"-")},mapOptions:function(t){var e=[];for(var r in t)e.push({value:r,text:t[r]});return e},optionGroups:function(t){var e={};for(var r in t){var o=t[r].split(":")[0];"undefined"===typeof e[o]&&(e[o]={}),e[o][r]=t[r]}return e},programTooltip:function(t){return t&&t.program?t.service_id.replace("gearboxworks/",""):"Not selected"},changeProjectService:function(t,e){this.$store.dispatch("changeProjectService",{projectHostname:this.projectHostname,serviceName:t,serviceId:e}),this.onClosePopoverFor(this.projectBase+this.escAttr(t))},onClosePopoverFor:function(t){this.$root.$emit("bv::hide::popover",t)},removeProjectStack:function(t){this.$store.dispatch("removeProjectStack",{projectHostname:this.projectHostname,stackName:t})}}},c=i,p=(r("0d9a"),r("2877")),l=Object(p["a"])(c,o,s,!1,null,"61fc91ef",null);e["default"]=l.exports},"41c8":function(t,e,r){t.exports=r.p+"img/laravel.1766a461.svg"},"46ce":function(t,e,r){},"47fa":function(t,e,r){"use strict";var o=r("1456"),s=r.n(o);s.a},4845:function(t,e,r){"use strict";var o=r("a318");t.exports=function(t,e){if("string"!==typeof t||"string"!==typeof e)throw new TypeError("Expected a string");return t.replace(new RegExp("(?:"+o(e)+"){2,}","g"),e)}},5390:function(t,e,r){t.exports=r.p+"img/joomla.d8aa2e45.svg"},"5dbc":function(t,e,r){var o=r("d3f4"),s=r("8b97").set;t.exports=function(t,e,r){var a,n=e.constructor;return n!==r&&"function"==typeof n&&(a=n.prototype)!==r.prototype&&o(a)&&s&&s(t,a),t}},"5dfc":function(t,e,r){},"613e":function(t,e,r){t.exports=r.p+"img/mariadb.e16110bc.svg"},"6c4c":function(t,e,r){t.exports=r.p+"img/mysql.dd2a5a35.svg"},"6d1c":function(t,e,r){"use strict";var o=r("a318");t.exports=function(t,e){if("string"!==typeof t||"string"!==typeof e)throw new TypeError;return e=o(e),t.replace(new RegExp("^"+e+"|"+e+"$","g"),"")}},7939:function(t,e,r){t.exports=r.p+"img/codeigniter.434bf735.svg"},"81bb":function(t,e,r){t.exports=r.p+"img/elasticsearch.3ecfa530.svg"},"8b97":function(t,e,r){var o=r("d3f4"),s=r("cb7c"),a=function(t,e){if(s(t),!o(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,o){try{o=r("9b43")(Function.call,r("11e9").f(Object.prototype,"__proto__").set,2),o(t,[]),e=!(t instanceof Array)}catch(s){e=!0}return function(t,r){return a(t,r),e?t.__proto__=r:o(t,r),t}}({},!1):void 0),check:a}},"8bcb":function(t,e,r){t.exports=r.p+"img/redis.3c39fafe.svg"},9093:function(t,e,r){var o=r("ce10"),s=r("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return o(t,s)}},9401:function(t,e,r){t.exports=r.p+"img/ruby.514befa7.svg"},"9b19":function(t,e,r){t.exports=r.p+"img/logo.63a7d78d.svg"},"9c60":function(t,e,r){var o=r("63b6"),s=r("13c8")(!0);o(o.S,"Object",{entries:function(t){return s(t)}})},a0ba:function(t,e,r){t.exports=r.p+"img/memcached.2bcccabf.svg"},a230:function(t,e,r){t.exports=r.p+"img/angular.e224f5ed.svg"},a318:function(t,e,r){"use strict";var o=/[|\\{}()[\]^$+*?.]/g;t.exports=function(t){if("string"!==typeof t)throw new TypeError("Expected a string");return t.replace(o,"\\$&")}},a88c:function(t,e,r){t.exports=r.p+"img/drupal.66089b06.svg"},aa77:function(t,e,r){var o=r("5ca1"),s=r("be13"),a=r("79e5"),n=r("fdef"),i="["+n+"]",c="​",p=RegExp("^"+i+i+"*"),l=RegExp(i+i+"*$"),u=function(t,e,r){var s={},i=a(function(){return!!n[t]()||c[t]()!=c}),p=s[t]=i?e(f):n[t];r&&(s[r]=p),o(o.P+o.F*i,"String",s)},f=u.trim=function(t,e){return t=String(s(t)),1&e&&(t=t.replace(p,"")),2&e&&(t=t.replace(l,"")),t};t.exports=u},acca:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",[r("b-card-group",{attrs:{deck:""}},t._l(t.projects,function(e,o){return r("b-card",{key:e.attributes.path,staticClass:"card--project",attrs:{to:{path:"/project/"+e.id}}},[r("project-details",{attrs:{storedProject:e,projectIndex:o}}),e.stack?r("div",{attrs:{slot:"footer"},slot:"footer"},[r("project-stack",{attrs:{projectHostname:e.id,projectStack:e.stack,projectIndex:o}})],1):t._e()],1)}),1)],1)},s=[],a=r("cebc"),n=r("2f62"),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:{"showing-details":t.showingDetails,"not-showing-details":!t.showingDetails}},[r("b-form",[r("b-form-group",{staticClass:"hostname-group",attrs:{id:"hostname-group-"+t.projectIndex,label:"","label-for":"hostname-input-"+t.projectIndex,description:t.showingDetails?"Hostname":""}},[r("b-form-input",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottomright",modifiers:{hover:!0,bottomright:!0}}],staticClass:"hostname-input",attrs:{id:"hostname-input-"+t.projectIndex,type:"text",size:"lg",title:t.showingDetails?"":"Expand details",required:"",placeholder:""},on:{change:t.maybeSubmit,click:t.showDetails},model:{value:t.attributes.hostname,callback:function(e){t.$set(t.attributes,"hostname",e)},expression:"attributes.hostname"}})],1),r("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"titlebar-icon titlebar-icon--state",attrs:{target:"_blank",href:"#",title:t.storedProject.attributes.enabled?"Stop all services":"Run all services"},on:{click:function(e){return e.preventDefault(),t.onRunStop(e)}}},[r("font-awesome-icon",{attrs:{icon:["fa",t.storedProject.attributes.enabled?"stop-circle":"play-circle"]}})],1),r("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],class:["titlebar-icon","titlebar-icon--frontend",{"is-disabled":t.attributes.enabled}],attrs:{target:"_blank",href:"http://"+t.attributes.hostname+"/",title:"Open Frontend"}},[r("font-awesome-icon",{attrs:{icon:["fa","home"]}})],1),r("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],class:["titlebar-icon","titlebar-icon--dashboard",{"is-disabled":t.attributes.enabled}],attrs:{target:"_blank",href:"http://"+t.attributes.hostname+"/wp-admin/",title:"Open Dashboard"}},[r("font-awesome-icon",{attrs:{icon:["fa","tachometer-alt"]}})],1),r("b-collapse",{attrs:{id:t.projectBase+"advanced",role:"tabpanel",visible:t.showingDetails}},[r("b-form-group",{attrs:{id:t.projectBase+"location-group","label-for":t.projectBase+"location-input",label:"",description:"Location"}},[r("b-form-input",{staticClass:"location-input",attrs:{disabled:"",id:t.projectBase+"location-input",value:t.resolveDir(t.attributes.baseDir,t.attributes.path)}}),r("a",{class:["cog-icon"],attrs:{target:"_blank",id:t.projectBase+"change-location",href:"#",title:"Change location"},on:{click:function(t){t.preventDefault()}}},[r("font-awesome-icon",{attrs:{icon:["fa","cog"]}})],1)],1),r("b-popover",{ref:t.projectBase+"location-popover",attrs:{target:t.projectBase+"change-location",container:t.projectBase+"advanced",triggers:"focus",placement:"bottom"}},[r("template",{slot:"title"},[r("b-button",{staticClass:"close",attrs:{"aria-label":"Close"},on:{click:function(e){return t.onClosePopoverFor(t.projectBase+"change-location")}}},[r("span",{staticClass:"d-inline-block",attrs:{"aria-hidden":"true"}},[t._v("×")])]),t._v("\n          Change location\n        ")],1),r("b-form-group",{attrs:{label:"Base directory:","label-for":"basedirInput",description:"Go to Preferences page to add more directories."}},[Object.entries(this.$store.getters.baseDirsAsOptions).length>1?r("b-form-select",{attrs:{required:"",options:this.$store.getters.baseDirsAsOptions},on:{change:t.maybeSubmit},model:{value:t.attributes.baseDir,callback:function(e){t.$set(t.attributes,"baseDir",e)},expression:"attributes.baseDir"}}):r("b-form-input",{attrs:{required:"",disabled:"",value:this.$store.state.baseDirs[t.attributes.baseDir]?this.$store.state.baseDirs[t.attributes.baseDir].text:""},on:{change:t.maybeSubmit}})],1),r("b-form-group",{attrs:{label:"Path:","label-for":"dirNameInput",description:""}},[r("b-form-input",{attrs:{type:"text",required:"",placeholder:""},on:{input:function(e){t.attributes.path=t.sanitizePath(t.attributes.path)},change:t.maybeSubmit},model:{value:t.attributes.path,callback:function(e){t.$set(t.attributes,"path",e)},expression:"attributes.path"}})],1)],2),r("b-form-group",{attrs:{id:"notesGroup",label:"","label-for":"notesInput",description:"(will be visible only here)"}},[r("b-form-textarea",{attrs:{id:"textarea",placeholder:"Notes...",rows:"3","max-rows":"6"},on:{change:t.maybeSubmit},model:{value:t.attributes.notes,callback:function(e){t.$set(t.attributes,"notes",e)},expression:"attributes.notes"}})],1),r("b-form-select",{staticClass:"add-stack",attrs:{disabled:!t.hasUnusedStacks,required:!0},on:{change:t.addProjectStack},model:{value:t.selectedService,callback:function(e){t.selectedService=e},expression:"selectedService"}},[r("option",{attrs:{value:"",disabled:""}},[t._v(t._s(t.hasUnusedStacks?"Add Stack...":"No more stacks to add"))]),t._l(t.stacksNotUnusedInProject,function(e,o){return r("option",{key:o,domProps:{value:o}},[t._v(t._s(o.replace("gearbox.works/","")))])})],2)],1)],1)],1)},c=[],p=(r("a481"),r("2d1f")),l=r.n(p),u=(r("c5f6"),r("0baa")),f=r.n(u),d={name:"ProjectDetails",props:{storedProject:{type:Object,required:!0},projectIndex:{type:Number,required:!0}},data:function(){return Object(a["a"])({},this.storedProject,{showingDetails:!1,selectedService:""})},computed:Object(a["a"])({},Object(n["b"])(["groupProjectStacks"]),{projectBase:function(){return this.escAttr(this.attributes.hostname)+"-"},hasUnusedStacks:function(){return l()(this.stacksNotUnusedInProject).length>0},stacksNotUnusedInProject:function(){var t={},e=this.groupProjectStacks(this.stack);for(var r in this.$store.state.gearStacks){var o=this.$store.state.gearStacks[r];"undefined"===typeof e[o]&&(t[o]=this.$store.state.gearStacks[o])}return t}}),methods:{escAttr:function(t){return t.replace(/\//g,"-").replace(/\./g,"-")},resolveDir:function(t,e){var r=this.$store.state.baseDirs[t],o="undefined"!==typeof r?-1!==r.text.indexOf("/")?"/":"\\":"/";return"undefined"!==typeof r?r.text+o+e:""},showDetails:function(){this.showingDetails=!0},maybeSubmit:function(t){this.$store.dispatch("updateProject",{hostname:this.storedProject.id,project:this.$data}).then(function(){})},onRunStop:function(){this.$store.dispatch("changeProjectState",{projectHostname:this.storedProject.id,isEnabled:!this.attributes.enabled})},onClosePopoverFor:function(t){this.$root.$emit("bv::hide::popover",t)},addProjectStack:function(t){this.selectedService="",this.$store.dispatch("addProjectStack",{projectHostname:this.id,stackName:t})},sanitizePath:function(t){var e=f()(t).trim();return e||"project"}}},b=d,g=(r("e247"),r("2877")),v=Object(g["a"])(b,i,c,!1,null,"7f6a2856",null),h=v.exports,m=r("3983"),j={name:"ProjectList",components:{ProjectDetails:h,ProjectStack:m["default"]},computed:Object(a["a"])({},Object(n["b"])({projects:"projects/all"})),mounted:function(){var t=this;this.$store.dispatch("projects/loadAll").then(function(){var e=t.$store.getters["projects/all"];console.log(e[0].id)}),this.$store.dispatch("stacks/loadAll").then(function(){var e=t.$store.getters["stacks/all"];console.log(e[0].id)})}},k=j,x=(r("47fa"),Object(g["a"])(k,o,s,!1,null,"2444bb6e",null));e["default"]=x.exports},b2e9:function(t,e,r){t.exports=r.p+"img/react.9a28da9f.svg"},b606:function(t,e,r){r("9c60"),t.exports=r("584a").Object.entries},b77f:function(t,e,r){t.exports=r.p+"img/apache.12c49354.svg"},c44f:function(t,e,r){t.exports=r.p+"img/perl.a025edb4.svg"},c502:function(t,e,r){t.exports=r.p+"img/nginx.eae76401.svg"},c5f6:function(t,e,r){"use strict";var o=r("7726"),s=r("69a8"),a=r("2d95"),n=r("5dbc"),i=r("6a99"),c=r("79e5"),p=r("9093").f,l=r("11e9").f,u=r("86cc").f,f=r("aa77").trim,d="Number",b=o[d],g=b,v=b.prototype,h=a(r("2aeb")(v))==d,m="trim"in String.prototype,j=function(t){var e=i(t,!1);if("string"==typeof e&&e.length>2){e=m?e.trim():f(e,3);var r,o,s,a=e.charCodeAt(0);if(43===a||45===a){if(r=e.charCodeAt(2),88===r||120===r)return NaN}else if(48===a){switch(e.charCodeAt(1)){case 66:case 98:o=2,s=49;break;case 79:case 111:o=8,s=55;break;default:return+e}for(var n,c=e.slice(2),p=0,l=c.length;p<l;p++)if(n=c.charCodeAt(p),n<48||n>s)return NaN;return parseInt(c,o)}}return+e};if(!b(" 0o1")||!b("0b1")||b("+0x1")){b=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof b&&(h?c(function(){v.valueOf.call(r)}):a(r)!=d)?n(new g(j(e)),r,b):j(e)};for(var k,x=r("9e1e")?p(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),y=0;x.length>y;y++)s(g,k=x[y])&&!s(b,k)&&u(b,k,l(g,k));b.prototype=v,v.constructor=b,r("2aba")(o,d,b)}},c6da:function(t,e,r){t.exports=r.p+"img/django.28fe09a0.svg"},d40f:function(t,e,r){"use strict";t.exports=(()=>/[<>:"\/\\|?*\x00-\x1F]/g),t.exports.windowsNames=(()=>/^(con|prn|aux|nul|com[0-9]|lpt[0-9])$/i)},e247:function(t,e,r){"use strict";var o=r("5dfc"),s=r.n(o);s.a},ee3c:function(t,e,r){t.exports=r.p+"img/wordpress.b08e20e3.svg"},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=projects.64eea0a1.js.map