(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["projects"],{"018e":function(t,e,r){},"0baa":function(t,e,r){"use strict";const s=r("df7c"),a=r("4845"),i=r("d40f"),o=r("6d1c"),n=100,c=/[\u0000-\u001f\u0080-\u009f]/g,l=/^\.+/,u=(t,e={})=>{if("string"!==typeof t)throw new TypeError("Expected a string");const r=void 0===e.replacement?"!":e.replacement;if(i().test(r)&&c.test(r))throw new Error("Replacement string cannot contain reserved filename characters");return t=t.replace(i(),r),t=t.replace(c,r),t=t.replace(l,r),r.length>0&&(t=a(t,r),t=t.length>1?o(t,r):t),t=i.windowsNames().test(t)?t+r:t,t=t.slice(0,n),t};u.path=((t,e)=>{return t=s.resolve(t),s.join(s.dirname(t),u(s.basename(t),e))}),t.exports=u},"1f2e":function(t,e,r){},"414b":function(t,e,r){"use strict";var s=r("1f2e"),a=r.n(s);a.a},4845:function(t,e,r){"use strict";var s=r("a318");t.exports=function(t,e){if("string"!==typeof t||"string"!==typeof e)throw new TypeError("Expected a string");return t.replace(new RegExp("(?:"+s(e)+"){2,}","g"),e)}},"504c":function(t,e,r){var s=r("0d58"),a=r("6821"),i=r("52a7").f;t.exports=function(t){return function(e){var r,o=a(e),n=s(o),c=n.length,l=0,u=[];while(c>l)i.call(o,r=n[l++])&&u.push(t?[r,o[r]]:o[r]);return u}}},"5bfe":function(t,e,r){},"61c8":function(t,e,r){"use strict";var s=r("5bfe"),a=r.n(s);a.a},"6d1c":function(t,e,r){"use strict";var s=r("a318");t.exports=function(t,e){if("string"!==typeof t||"string"!==typeof e)throw new TypeError;return e=s(e),t.replace(new RegExp("^"+e+"|"+e+"$","g"),"")}},"7aab":function(t,e,r){},"8b83":function(t,e,r){"use strict";var s=r("e6839"),a=r.n(s);a.a},"9a70":function(t,e,r){},a318:function(t,e,r){"use strict";var s=/[|\\{}()[\]^$+*?.]/g;t.exports=function(t){if("string"!==typeof t)throw new TypeError("Expected a string");return t.replace(s,"\\$&")}},a4e2:function(t,e,r){"use strict";var s=r("018e"),a=r.n(s);a.a},acca:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"projects-container"},[r("projects-filter",{attrs:{visible:"false"}}),r("b-card-group",{staticClass:"pl-3 pr-3",attrs:{columns:""}},t._l(t.projects,function(t,e){return r("project-card",{key:t.id,attrs:{project:t,projectIndex:e}})}),1)],1)},a=[],i=r("cebc"),o=r("2f62"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"drawer"},[t.expanded?r("div",{staticClass:"drawer-contents clearfix"},[r("div",{staticClass:"left-panel"},[r("b-form",{staticClass:"filter-form"},[r("b-form-group",{staticClass:"form-group--location",attrs:{label:"","label-for":"filter-location",description:"Location"}},[r("b-select",{attrs:{id:"filter-location",variant:"secondary"}},[r("option",{attrs:{disabled:""}},[t._v("Filter by location...")]),r("option",{domProps:{value:null}},[t._v("Projects from all known locations")]),r("option",[t._v("C:\\Users\\user\\Gearbox Sites\\")])])],1),r("b-form-group",{staticClass:"form-group--state",attrs:{label:"","label-for":"filter-state",description:"State"}},[r("b-select",{attrs:{id:"filter-state",variant:"secondary"}},[r("option",{attrs:{disabled:""}},[t._v("Filter by State ...")]),r("option",{domProps:{value:null}},[t._v("Running & Stopped")]),r("option",[t._v("Running only")]),r("option",[t._v("Stopped only")])])],1),r("b-form-group",{staticClass:"form-group--stacks",attrs:{label:"","label-for":"filter-stacks",description:"Stacks"}},[r("b-select",{attrs:{id:"filter-stacks",variant:"secondary"}},[r("option",{attrs:{disabled:""}},[t._v("Filter by Used Stacks...")]),r("option",{domProps:{value:null}},[t._v("Projects with any Stack")]),r("option",{domProps:{value:null}},[t._v("Projects with no Stacks")]),r("option",[t._v("WordPress")]),r("option",[t._v("ElasticSearch")]),r("option",[t._v("LAMP")]),r("option",[t._v("LEMP")])])],1),r("b-form-group",{staticClass:"form-group--candidates",attrs:{label:"","label-for":"filter-candidates",description:" ",title:"Check to see all projects that can be imported"}},[r("b-form-checkbox",{attrs:{id:"filter-candidates",name:"filter-candidates",value:"show-candidates","unchecked-value":"hide-candidates"}},[t._v("\n            Project Candidates\n          ")])],1)],1)],1),r("div",{staticClass:"right-panel"},[r("b-form",{staticClass:"sort-form"},[r("b-form-group",{attrs:{id:"sort-by-group",label:"","label-for":"sort-select",description:"Sort by"}},[r("b-select",{attrs:{id:"sort-by",variant:"secondary"}},[r("option",{attrs:{disabled:""}},[t._v("Sort by...")]),r("option",{domProps:{value:null}},[t._v("Access date")]),r("option",[t._v("Creation date")]),r("option",[t._v("Project title")])])],1),r("b-form-group",{attrs:{id:"sort-order-group",label:"","label-for":"sort-order-select",description:"Order"}},[r("a",{staticClass:"view-mode view-mode--table",attrs:{target:"_blank",href:"#",title:"Table View"},on:{click:function(e){return e.preventDefault(),t.toggleSortOrder(e)}}},[r("font-awesome-icon",{attrs:{icon:["fa","sort-alpha-up"]}})],1)])],1),r("b-form",{staticClass:"view-form"},[r("b-form-group",{attrs:{id:"view-form",label:"","label-for":"view-select",description:"View"}},[r("a",{staticClass:"view-mode view-mode--cards",attrs:{target:"_blank",href:"#",title:"Cards View"},on:{click:function(e){return e.preventDefault(),t.switchView("cards")}}},[r("font-awesome-icon",{attrs:{icon:["fa","columns"]}})],1),r("a",{staticClass:"view-mode view-mode--table is-inactive",attrs:{target:"_blank",href:"#",title:"Table View"},on:{click:function(e){return e.preventDefault(),t.switchView("table")}}},[r("font-awesome-icon",{attrs:{icon:["fa","th-list"]}})],1)])],1)],1)]):t._e(),r("div",{staticClass:"drawer-handle",on:{click:function(e){t.expanded=!t.expanded}}},[r("span",{staticClass:"small"},[t._v("Viewing Options "+t._s(t.expanded?"^":"v"))])])])},c=[],l={name:"ProjectsFilter",props:{},data:function(){return{expanded:!1}},methods:{}},u=l,p=(r("8b83"),r("61c8"),r("2877")),d=Object(p["a"])(u,n,c,!1,null,"307a6ecc",null),f=d.exports,b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-card",{class:{"card--project":!0,"showing-details":t.showingDetails,"not-showing-details":!t.showingDetails},attrs:{to:{path:"/project/"+t.id}}},[r("b-form",{staticClass:"clearfix"},[r("b-form-group",{staticClass:"hostname-group",attrs:{id:"hostname-group-"+t.projectIndex,label:"","label-for":"hostname-input-"+t.projectIndex,description:t.showingDetails?"Hostname":""}},[r("b-form-input",{staticClass:"hostname-input",attrs:{id:"hostname-input-"+t.projectIndex,type:"text",size:"lg",required:"",placeholder:""},on:{change:t.maybeSubmit,click:function(e){t.showingDetails=!0}},model:{value:t.hostname,callback:function(e){t.hostname=e},expression:"hostname"}})],1),r("project-toolbar",{attrs:{project:t.project,projectIndex:t.projectIndex},on:{"run-stop":t.onRunStop}}),t.showingDetails?r("project-details",{attrs:{project:t.project,projectIndex:t.projectIndex},on:{"toggle-details":t.toggleDetails}}):t._e()],1),r("b-alert",{attrs:{show:t.alertShow,dismissible:t.alertDismissible,variant:t.alertVariant,fade:""},on:{dismissed:function(e){t.alertShow=!1}}},[t._v(t._s(t.alertContent))]),t.project.attributes.stack&&t.project.attributes.stack.length?r("div",{attrs:{slot:"footer"},slot:"footer"},[r("project-stack-list",{attrs:{project:t.project,projectIndex:t.projectIndex}})],1):t._e()],1)},h=[],v=(r("a481"),r("c5f6"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{staticClass:"toolbar-list"},[r("li",{staticClass:"toolbar-item"},[r("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"toolbar-link toolbar-link--state",attrs:{target:"_blank",href:"#",title:t.isRunning?"Stop all services":"Run all services"},on:{click:function(e){return e.preventDefault(),t.$emit("run-stop")}}},[r("font-awesome-icon",{attrs:{icon:["fa",t.isRunning?"stop":"play"]}})],1)])])}),m=[],g={name:"ProjectToolbar",props:{project:{type:Object,required:!0},projectIndex:{type:Number,required:!0}},data:function(){return{id:this.project.id,hostname:this.project.attributes.hostname}},computed:{projectBase:function(){return"gb-"+this.escAttr(this.id)+"-"},isRunning:function(){return this.project.attributes.enabled}},methods:{escAttr:function(t){return t.replace(/\//g,"-").replace(/\./g,"-")}}},j=g,w=(r("414b"),Object(p["a"])(j,v,m,!1,null,"262b50d4",null)),k=w.exports,y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:t.projectBase+"details",role:"tabpanel"}},[r("b-form-group",{attrs:{id:t.projectBase+"location-group","label-for":t.projectBase+"location-input",label:"",description:"Location"}},[r("b-form-input",{staticClass:"location-input",attrs:{disabled:"",id:t.projectBase+"location-input",value:t.resolveDir(t.currentBasedir,t.path)}}),r("a",{staticClass:"cog-icon",attrs:{target:"_blank",id:t.projectBase+"change-location",href:"#",title:"Change location"},on:{click:function(t){t.preventDefault()}}},[r("font-awesome-icon",{attrs:{icon:["fa","cog"]}})],1),r("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"folder-icon",attrs:{target:"_blank",id:t.projectBase+"open-location",href:"#",title:"Open project directory"}},[r("font-awesome-icon",{attrs:{icon:["fa","folder"]}})],1)],1),r("b-popover",{ref:t.projectBase+"location-popover",attrs:{target:t.projectBase+"change-location",container:t.projectBase+"details",triggers:"focus",placement:"bottom"}},[r("template",{slot:"title"},[r("b-button",{staticClass:"close",attrs:{"aria-label":"Close"},on:{click:function(e){return t.onClosePopoverFor(t.projectBase+"change-location")}}},[r("span",{staticClass:"d-inline-block",attrs:{"aria-hidden":"true"}},[t._v("Ã—")])]),t._v("\n      Change location\n    ")],1),r("b-form-group",{attrs:{label:"Base directory:","label-for":"basedirInput",description:"Go to Preferences page to add more directories."}},[Object.entries(this.$store.getters.basedirsAsOptions).length>1?r("b-form-select",{attrs:{required:"",options:this.$store.getters.basedirsAsOptions},on:{change:t.maybeSubmit},model:{value:t.basedir,callback:function(e){t.basedir=e},expression:"basedir"}}):r("b-form-input",{attrs:{required:"",disabled:"",value:t.currentBasedir},on:{change:t.maybeSubmit}})],1),r("b-form-group",{attrs:{label:"Path:","label-for":"dirNameInput",description:""}},[r("b-form-input",{attrs:{type:"text",required:"",placeholder:""},on:{input:function(e){t.path=t.sanitizePath(t.path)},change:t.maybeSubmit},model:{value:t.path,callback:function(e){t.path=e},expression:"path"}})],1)],2),r("b-form-group",{attrs:{id:"notesGroup",label:"","label-for":"notesInput",description:"(will be visible only here)"}},[r("b-form-textarea",{attrs:{id:"textarea",placeholder:"Notes...",rows:"3","max-rows":"6"},on:{change:t.maybeSubmit},model:{value:t.notes,callback:function(e){t.notes=e},expression:"notes"}})],1),r("b-form-select",{staticClass:"add-stack",attrs:{disabled:!t.hasStacksNotInProject,required:!0},on:{change:t.addProjectStack},model:{value:t.selectedService,callback:function(e){t.selectedService=e},expression:"selectedService"}},[r("option",{attrs:{value:"",disabled:""}},[t._v(t._s(t.hasStacksNotInProject?"Add stack...":"All stacks already added"))]),t._l(t.stacksNotInProject,function(e,s){return r("option",{key:s,domProps:{value:s}},[t._v(t._s(e.attributes.stackname))])})],2),r("a",{staticClass:"hide-details",attrs:{title:"Hide project details"},on:{click:function(e){return t.$emit("toggle-details")}}},[r("font-awesome-icon",{attrs:{icon:["fa","chevron-up"]}}),r("span",[t._v("Hide")])],1)],1)},_=[],x=(r("ac6a"),r("ffc1"),r("0baa")),S=r.n(x),C={name:"ProjectDetails",props:{project:{type:Object,required:!0},projectIndex:{type:Number,required:!0}},data:function(){return Object(i["a"])({id:this.project.id},this.project.attributes,{selectedService:""})},computed:Object(i["a"])({},Object(o["b"])({basedirBy:"basedirBy",serviceBy:"serviceBy",gearspecBy:"gearspecBy",allGearspecs:"gearspecs/all",allStacks:"stacks/all"}),{projectBase:function(){return"gb-"+this.escAttr(this.id)+"-"},currentBasedir:function(){var t=this.basedirBy("id",this.basedir);return t?t.attributes.basedir:""},stacksNotInProject:function(){var t={},e=this.project.attributes.stack?this.groupProjectServicesByStack(this.project.attributes.stack):{};for(var r in this.allStacks){var s=this.allStacks[r];"undefined"===typeof e[s.id]&&(t[s.id]=s)}return t},hasStacksNotInProject:function(){return Object.entries(this.stacksNotInProject).length>0},servicesInProject:function(){for(var t={},e=0;e>this.stack.length;e++){var r=this.serviceBy("id",this.stack[e].service_id);r&&(t[this.stack[e].service_id]=r)}return t},gearsInProject:function(){for(var t={},e=0;e>this.stack.length;e++){var r=this.gearspecBy("id",this.stack[e].gearspec_id);r&&(t[this.stack[e].gearspec_id]=r)}return t}}),methods:{escAttr:function(t){return t.replace(/\//g,"-").replace(/\./g,"-")},groupProjectServicesByStack:function(t){var e=this,r={};return t.forEach(function(t,s){var a=e.gearspecBy("id",t.gearspec_id),i=e.serviceBy("id",t.service_id);a&&i&&("undefined"===typeof r[a.attributes.stack_id]&&(r[a.attributes.stack_id]={}),r[a.attributes.stack_id][a.attributes.role]=i)}),r},resolveDir:function(t,e){return t+(-1!==t.indexOf("/")?"/":"\\")+e},maybeSubmit:function(t){this.$store.dispatch("updateProject",{id:this.id,attributes:this.$data}).then(function(){})},onClosePopoverFor:function(t){this.$root.$emit("bv::hide::popover",t)},addProjectStack:function(t){this.selectedService="",this.$store.dispatch("addProjectStack",{projectId:this.id,stackId:t})},sanitizePath:function(t){var e=S()(t).trim();return e||"project"}}},P=C,B=(r("b6e8"),Object(p["a"])(P,y,_,!1,null,"731070ec",null)),$=B.exports,I=r("2123"),A={name:"ProjectCard",props:{project:{type:Object,required:!0},projectIndex:{type:Number,required:!0}},data:function(){return Object(i["a"])({id:this.project.id},this.project.attributes,{showingDetails:!1,alertShow:!1,alertContent:"content",alertDismissible:!0,alertVariant:"warning"})},components:{ProjectToolbar:k,ProjectDetails:$,ProjectStackList:I["default"]},computed:{projectBase:function(){return"gb-"+this.escAttr(this.id)+"-"},isRunning:function(){return this.project.attributes.enabled}},methods:{escAttr:function(t){return t.replace(/\//g,"-").replace(/\./g,"-")},toggleDetails:function(){this.showingDetails=!this.showingDetails},showAlert:function(t){"string"===typeof t?this.alertContent=t:(this.alertVariant=t.variant||this.alertVariant,this.alertDismissible=t.dismissible||this.alertDismissible,this.alertContent=t.content||this.alertContent),this.alertShow=!0},maybeSubmit:function(t){this.$store.dispatch("updateProject",{id:this.id,attributes:this.$data}).then(function(){})},onRunStop:function(){this.project.attributes.stack&&this.project.attributes.stack.length>0?this.$store.dispatch("changeProjectState",{projectId:this.id,isEnabled:!this.isRunning}):this.showAlert("Please add some stacks first!")}}},D=A,O=(r("a4e2"),Object(p["a"])(D,b,h,!1,null,"2ceab748",null)),E=O.exports,N={name:"ProjectList",components:{ProjectsFilter:f,ProjectCard:E},computed:Object(i["a"])({},Object(o["b"])({projects:"projects/all"})),mounted:function(){var t=this;this.$store.dispatch("basedirs/loadAll").then(function(){}),this.$store.dispatch("stacks/loadAll").then(function(){}),this.$store.dispatch("services/loadAll").then(function(){}),this.$store.dispatch("gearspecs/loadAll").then(function(){}),this.$store.dispatch("projects/loadAll").then(function(){}).then(function(){t.$store.dispatch("loadProjectDetails")})}},R=N,q=(r("bedc"),Object(p["a"])(R,s,a,!1,null,"6cf11590",null));e["default"]=q.exports},b6e8:function(t,e,r){"use strict";var s=r("7aab"),a=r.n(s);a.a},bedc:function(t,e,r){"use strict";var s=r("9a70"),a=r.n(s);a.a},d40f:function(t,e,r){"use strict";t.exports=(()=>/[<>:"\/\\|?*\x00-\x1F]/g),t.exports.windowsNames=(()=>/^(con|prn|aux|nul|com[0-9]|lpt[0-9])$/i)},df7c:function(t,e,r){(function(t){function r(t,e){for(var r=0,s=t.length-1;s>=0;s--){var a=t[s];"."===a?t.splice(s,1):".."===a?(t.splice(s,1),r++):r&&(t.splice(s,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}var s=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,a=function(t){return s.exec(t).slice(1)};function i(t,e){if(t.filter)return t.filter(e);for(var r=[],s=0;s<t.length;s++)e(t[s],s,t)&&r.push(t[s]);return r}e.resolve=function(){for(var e="",s=!1,a=arguments.length-1;a>=-1&&!s;a--){var o=a>=0?arguments[a]:t.cwd();if("string"!==typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,s="/"===o.charAt(0))}return e=r(i(e.split("/"),function(t){return!!t}),!s).join("/"),(s?"/":"")+e||"."},e.normalize=function(t){var s=e.isAbsolute(t),a="/"===o(t,-1);return t=r(i(t.split("/"),function(t){return!!t}),!s).join("/"),t||s||(t="."),t&&a&&(t+="/"),(s?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(i(t,function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,r){function s(t){for(var e=0;e<t.length;e++)if(""!==t[e])break;for(var r=t.length-1;r>=0;r--)if(""!==t[r])break;return e>r?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var a=s(t.split("/")),i=s(r.split("/")),o=Math.min(a.length,i.length),n=o,c=0;c<o;c++)if(a[c]!==i[c]){n=c;break}var l=[];for(c=n;c<a.length;c++)l.push("..");return l=l.concat(i.slice(n)),l.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=a(t),r=e[0],s=e[1];return r||s?(s&&(s=s.substr(0,s.length-1)),r+s):"."},e.basename=function(t,e){var r=a(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(t){return a(t)[3]};var o="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,r("f28c"))},e6839:function(t,e,r){},ffc1:function(t,e,r){var s=r("5ca1"),a=r("504c")(!0);s(s.S,"Object",{entries:function(t){return a(t)}})}}]);
//# sourceMappingURL=projects.9c388682.js.map