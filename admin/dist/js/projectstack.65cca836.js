(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["projectstack"],{"055b":function(e,t,r){e.exports=r.p+"img/python.51c2eab2.svg"},"090e":function(e,t,r){e.exports=r.p+"img/nodejs.94cafb0d.svg"},"11e9":function(e,t,r){var s=r("52a7"),i=r("4630"),a=r("6821"),o=r("6a99"),n=r("69a8"),c=r("c69a"),l=Object.getOwnPropertyDescriptor;t.f=r("9e1e")?l:function(e,t){if(e=a(e),t=o(t,!0),c)try{return l(e,t)}catch(r){}if(n(e,t))return i(!s.f.call(e,t),e[t])}},1299:function(e,t,r){"use strict";var s=r("efa7"),i=r.n(s);i.a},1540:function(e,t,r){e.exports=r.p+"img/php.fa78b345.svg"},"1b4d":function(e,t,r){e.exports=r.p+"img/flask.318d58cb.svg"},2232:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:{"project-stack-list":!0,"start-collapsed":e.startCollapsed,"is-loading":e.isLoading},attrs:{id:e.projectBase+"stack",role:"tablist"}},[e.isLoading?r("font-awesome-icon",{attrs:{icon:"circle-notch",spin:"",title:"Loading project details..."}}):r("div",{staticClass:"project-stack-list-wrap"},e._l(e.groupedStackItems,function(t,s,i){return r("stack-card",{key:s,attrs:{stackId:s,stackIndex:i,stackItems:t,project:e.project,projectIndex:e.projectIndex,"start-collapsed":e.startCollapsed||!e.startCollapsed&&Object.entries(e.groupedStackItems).length>1}})}),1)],1)},i=[],a=(r("a481"),r("55dd"),r("456d"),r("ac6a"),r("cebc")),o=(r("c5f6"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:{"stack-card":!0,"is-collapsible":e.isCollapsible,"is-collapsed":e.isCollapsed}},[r("h2",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"stack-title",attrs:{title:e.isCollapsed?"Show services":"Hide services"},on:{click:e.onTitleClicked}},[r("font-awesome-icon",{staticStyle:{color:"silver"},attrs:{icon:["fa","layer-group"]}}),e._v(" \n    "+e._s(e.stackId.replace("gearbox.works/",""))+"\n  ")],1),e.isCollapsed?e._e():r("stack-toolbar",{attrs:{project:e.project,projectIndex:e.projectIndex,stackId:e.stackId},on:{"show-alert":e.showAlert}}),r("div",{staticClass:"stack-content"},[e.isCollapsible&&e.isCollapsed?e._e():r("ul",{staticClass:"service-list"},e._l(e.stackItems,function(t,s){return r("li",{key:e.id+t.gearspec.attributes.role,staticClass:"service-item"},[r("stack-gear",{attrs:{project:e.project,stackItem:t,projectIndex:e.projectIndex,stackIndex:e.stackIndex,itemIndex:s}})],1)}),0),r("b-alert",{key:e.stackId,attrs:{show:e.alertShow,dismissible:e.alertDismissible,variant:e.alertVariant,fade:""},on:{dismissed:function(t){e.alertShow=!1}}},[e._v(e._s(e.alertContent))])],1)],1)}),n=[],c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"toolbar-list"},[r("div",{key:e.projectBase+e.stackId+"more",staticClass:"toolbar-item toolbar-item--more"},[r("b-dropdown",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"link","no-caret":"",title:"More stack actions"}},[r("template",{slot:"button-content"},[r("font-awesome-icon",{attrs:{icon:["fa","ellipsis-v"]}}),r("span",{staticClass:"sr-only"},[e._v("More actions")])],1),r("b-dropdown-item",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.removeProjectStack(t)}}},[e._v("Remove stack")])],2)],1),e.isWordPress?r("transition",{attrs:{name:"icons",tag:"ul"}},[e.isRunning?r("li",{key:e.projectBase+e.stackId+"frontend",class:["toolbar-item","toolbar-item--frontend"]},[r("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"toolbar-link",attrs:{target:"_blank",href:"//"+e.hostname+"/",title:"Open Frontend"+(e.isRunning?"":" (not running)")}},[r("font-awesome-icon",{attrs:{icon:["fa","home"]}})],1)]):e._e()]):e._e(),e.isWordPress?r("transition",{attrs:{name:"icons",tag:"ul"}},[e.isRunning?r("li",{key:e.projectBase+e.stackId+"dashboard",class:["toolbar-item","toolbar-item--dashboard"]},[r("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"toolbar-link",attrs:{target:"_blank",href:"//"+e.hostname+"/wp-admin/",title:"Open Dashboard"+(e.isRunning?"":" (not running)")}},[r("font-awesome-icon",{attrs:{icon:["fa","tachometer-alt"]}})],1)]):e._e()]):e._e(),e.isWordPress?r("transition",{attrs:{name:"icons",tag:"ul"}},[e.isRunning?r("li",{key:e.projectBase+e.stackId+"adminer",class:["toolbar-item","toolbar-item--adminer"]},[r("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"toolbar-link",attrs:{target:"_blank",href:"//"+e.hostname+"/wp-admin/",title:"Open Adminer"+(e.isRunning?"":" (not running)")}},[r("font-awesome-icon",{attrs:{icon:["fa","database"]}})],1)]):e._e()]):e._e(),e.isWordPress?r("transition",{attrs:{name:"icons",tag:"ul"}},[e.isRunning?r("li",{key:e.projectBase+e.stackId+"mailhog",class:["toolbar-item","toolbar-item--frontend"]},[r("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"toolbar-link",attrs:{target:"_blank",href:"//"+e.hostname+":4003",title:"Open Mailhog"+(e.isRunning?"":" (not running)")}},[r("font-awesome-icon",{attrs:{icon:["fa","envelope"]}})],1)]):e._e()]):e._e()],1)},l=[],p={name:"StackToolbar",props:{project:{type:Object,required:!0},projectIndex:{type:Number,required:!0},stackId:{type:String,required:!0}},data:function(){return{isWordPress:-1!==this.stackId.indexOf("/wordpress")}},computed:{projectBase:function(){return"gb-"+this.escAttr(this.project.id)+"-"},hostname:function(){return this.project.attributes.hostname},isRunning:function(){return this.project.attributes.enabled}},methods:{escAttr:function(e){return e.replace(/\//g,"-").replace(/\./g,"-")},removeProjectStack:function(e){this.project.attributes.enabled?this.$emit("show-alert","Cannot remove stack while the project is running!"):this.$store.dispatch("removeProjectStack",{projectId:this.project.id,stackId:this.stackId})}}},d=p,u=(r("25ee"),r("2877")),f=Object(u["a"])(d,c,l,!1,null,"71c1da1a",null),g=f.exports,v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"project-gear",attrs:{id:e.gearControlId,tabindex:100*e.projectIndex+10*e.stackIndex+e.itemIndex+1}},[e.service?s("img",{class:{"service-program":!0,"is-loaded":e.isLoaded,"is-switching":e.isSwitching,"is-switching-same":e.isSwitchingSame,"is-switching-same-again":e.isSwitchingSameAgain},attrs:{src:r("31e8")("./"+e.service.attributes.program+".svg")},on:{load:e.onImageLoaded}}):s("font-awesome-icon",{attrs:{icon:["fa","expand"]}}),s("h6",{staticClass:"gear-role"},[e._v(e._s(e.gearspec.attributes.role))]),s("b-tooltip",{key:e.gearControlId+"-"+(e.service?e.service.id:"unselected"),attrs:{triggers:"hover",target:e.gearControlId,title:e.programTooltip}}),s("b-popover",{ref:e.gearControlId+"-popover",attrs:{target:e.gearControlId,container:e.projectBase+"stack",triggers:"focus",placement:"bottom"}},[s("template",{slot:"title"},[s("b-button",{staticClass:"close",attrs:{"aria-label":"Close"},on:{click:e.closePopover}},[s("span",{staticClass:"d-inline-block",attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v("\n        Change service\n      ")],1),s("b-form-group",[s("label",{attrs:{for:e.gearControlId+"-input"}},[e._v(e._s(e.gearspec.attributes.role)+":")]),s("b-form-select",{ref:e.gearControlId+"-select",attrs:{value:e.preselectClosestGearServiceId,tabindex:100*e.projectIndex+10*e.stackIndex+e.itemIndex+9},on:{change:function(t){return e.onChangeService(t)}}},[e.defaultService?e._e():s("option",{attrs:{value:""}},[e._v("Do not run this service")]),s("option",{attrs:{disabled:""},domProps:{value:null}},[e._v("Select service...")]),e._l(e.servicesGroupedByRole,function(t,r){return s("optgroup",{key:r,attrs:{label:r}},e._l(t,function(t){return s("option",{key:t,attrs:{disabled:e.project.attributes.enabled},domProps:{value:t}},[e._v(e._s(t.replace("gearboxworks/","")))])}),0)})],2),s("b-alert",{attrs:{show:!e.stackItem.service,variant:"warning"}},[e._v("Note, the currently selected version of the service is different from what is in project specification!")]),s("b-alert",{attrs:{show:e.project.attributes.enabled}},[e._v("Note, you cannot change this service while the project is running!")])],1)],2)],1)},h=[],m=(r("28a5"),r("2f62")),b={name:"StackGear",props:{project:{type:Object,required:!0},stackItem:{type:Object,required:!0},projectIndex:{type:Number,required:!0},stackIndex:{type:Number,required:!0},itemIndex:{type:Number,required:!0}},data:function(){return{isLoaded:!1,isSwitching:!0,isSwitchingSame:!1,isSwitchingSameAgain:!1}},components:{},computed:Object(a["a"])({},Object(m["c"])(["serviceBy","gearspecBy","stackBy","stackDefaultServiceByRole","stackServicesByRole","preselectServiceId"]),{projectBase:function(){return"gb-"+this.escAttr(this.project.id)+"-"},gearspec:function(){return this.stackItem.gearspec},service:function(){var e=null;if(this.stackItem.service)e=this.stackItem.service;else if(this.stackItem.serviceId){var t=this.preselectClosestGearServiceId;t&&(e=this.serviceBy("id",t))}return e},stack:function(){return this.stackBy("id",this.gearspec.attributes.stack_id)},gearControlId:function(){return this.projectBase+(this.stack?this.stack.attributes.stackname+"-":"")+this.gearspec.attributes.role},defaultService:function(){return this.stackDefaultServiceByRole(this.stack,this.stackItem.gearspecId)},preselectClosestGearServiceId:function(){return this.preselectServiceId(this.stackServicesByRole(this.stack,this.stackItem.gearspecId),this.defaultService,this.stackItem.serviceId)},servicesGroupedByRole:function(){var e=this.stackServicesByRole(this.stack,this.gearspec.id),t={};for(var r in e){var s=e[r].split(":")[0].replace("gearboxworks/","");"undefined"===typeof t[s]&&(t[s]={}),t[s][r]=e[r]}return t},programTooltip:function(){var e=this.stackItem.serviceId,t=e&&this.service?this.service.attributes:null,r=t?t.program:"",s=t?t.version:"";return e&&(!t||this.service&&this.service.id!==e)&&(r=e.split("/")[1].split(":")[0],s=e.split("/")[1].split(":")[1]),r&&s?r+" "+s:"Service not selected"}}),methods:{escAttr:function(e){return e.replace(/\//g,"-").replace(/\./g,"-")},onChangeService:function(e){var t=this.service?this.service.id:"",r=t?t.split("/")[1].split(":")[0]:"",s=e?e.split("/")[1].split(":")[0]:"";r!==s?(this.isLoaded=!1,this.isSwitching=!0,this.isSwitchingSame=!1,this.isSwitchingSameAgain=!1):t!==e&&(this.isSwitchingSame||this.isSwitchingSameAgain?(this.isSwitchingSame=!this.isSwitchingSame,this.isSwitchingSameAgain=!this.isSwitchingSameAgain):(this.isSwitchingSame=!0,this.isSwitchingSameAgain=!1)),this.$store.dispatch("changeProjectService",{projectId:this.project.id,gearspecId:this.gearspec.id,serviceId:e}),this.closePopover()},closePopover:function(){this.$root.$emit("bv::hide::popover",this.gearControlId)},onImageLoaded:function(e){this.isSwitching=!1,this.isLoaded=!0}}},k=b,I=(r("1299"),Object(u["a"])(k,v,h,!1,null,"4726d9ce",null)),j=I.exports,y={name:"StackCard",props:{project:{type:Object,required:!0},projectIndex:{type:Number,required:!0},stackId:{type:String,required:!0},stackIndex:{type:Number,required:!0},stackItems:{type:Array,required:!0},isCollapsible:{type:Boolean,default:!0,required:!1},startCollapsed:{type:Boolean,required:!1,default:!0}},data:function(){return{id:this.project.id,alertShow:!1,alertContent:"content",alertDismissible:!0,alertVariant:"info",isCollapsed:this.startCollapsed}},components:{StackToolbar:g,StackGear:j},computed:Object(a["a"])({},Object(m["c"])(["serviceBy","gearspecBy"]),{projectBase:function(){return"gb-"+this.escAttr(this.id)+"-"}}),methods:{escAttr:function(e){return e.replace(/\//g,"-").replace(/\./g,"-")},onTitleClicked:function(){this.isCollapsed=!this.isCollapsed},showAlert:function(e){"string"===typeof e?this.alertContent=e:(this.alertVariant=e.variant||this.alertVariant,this.alertDismissible=e.dismissible||this.alertDismissible,this.alertContent=e.content||this.alertContent),this.alertShow=!0}}},S=y,_=(r("3ca2"),r("f843"),Object(u["a"])(S,o,n,!1,null,"55e564f1",null)),w=_.exports,x={name:"StackCardList",props:{project:{type:Object,required:!0},projectIndex:{type:Number,required:!0},startCollapsed:{type:Boolean,required:!1,default:!1}},data:function(){return{id:this.project.id}},components:{StackCard:w},computed:Object(a["a"])({},Object(m["c"])(["serviceBy","gearspecBy"]),{projectBase:function(){return"gb-"+this.escAttr(this.id)+"-"},isLoading:function(){return"undefined"===typeof this.project.attributes.stack},groupedStackItems:function(){var e=this,t={},r=this.project.attributes.stack||[];return r.forEach(function(r){if(!r.isRemoved){var s=e.gearspecBy("id",r.gearspec_id);if(s){"undefined"===typeof t[s.attributes.stack_id]&&(t[s.attributes.stack_id]=[]);var i=r.service_id?e.serviceBy("id",r.service_id):null;t[s.attributes.stack_id].push({gearspecId:r.gearspec_id,gearspec:s,serviceId:r.service_id,service:i})}}}),Object.keys(t).forEach(function(e){t[e]=t[e].sort(function(e,t){return e.gearspec.attributes.role>t.gearspec.attributes.role?1:e.gearspec.attributes.role===t.gearspec.attributes.role?0:-1})}),Object.keys(t).sort().reduce(function(e,r){return e[r]=t[r],e},{})}}),methods:{escAttr:function(e){return e.replace(/\//g,"-").replace(/\./g,"-")}}},C=x,O=(r("777d"),Object(u["a"])(C,s,i,!1,null,"783a753e",null));t["default"]=O.exports},"25ee":function(e,t,r){"use strict";var s=r("ff57"),i=r.n(s);i.a},"319f":function(e,t,r){e.exports=r.p+"img/rails.2db29782.svg"},"31e8":function(e,t,r){var s={"./angular.svg":"a230","./apache.svg":"b77f","./codeigniter.svg":"7939","./django.svg":"c6da","./drupal.svg":"a88c","./elasticsearch.svg":"81bb","./flask.svg":"1b4d","./joomla.svg":"5390","./laravel.svg":"41c8","./logo.svg":"9b19","./mariadb.svg":"613e","./memcached.svg":"a0ba","./mysql.svg":"6c4c","./nginx.svg":"c502","./nodejs.svg":"090e","./perl.svg":"c44f","./php.svg":"1540","./python.svg":"055b","./rails.svg":"319f","./react.svg":"b2e9","./redis.svg":"8bcb","./ruby.svg":"9401","./wordpress.svg":"ee3c"};function i(e){var t=a(e);return r(t)}function a(e){var t=s[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return t}i.keys=function(){return Object.keys(s)},i.resolve=a,e.exports=i,i.id="31e8"},"3ca2":function(e,t,r){"use strict";var s=r("c7ba"),i=r.n(s);i.a},"41c8":function(e,t,r){e.exports=r.p+"img/laravel.1766a461.svg"},"456d":function(e,t,r){var s=r("4bf8"),i=r("0d58");r("5eda")("keys",function(){return function(e){return i(s(e))}})},4661:function(e,t,r){},5390:function(e,t,r){e.exports=r.p+"img/joomla.d8aa2e45.svg"},"5dbc":function(e,t,r){var s=r("d3f4"),i=r("8b97").set;e.exports=function(e,t,r){var a,o=t.constructor;return o!==r&&"function"==typeof o&&(a=o.prototype)!==r.prototype&&s(a)&&i&&i(e,a),e}},"5eda":function(e,t,r){var s=r("5ca1"),i=r("8378"),a=r("79e5");e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],o={};o[e]=t(r),s(s.S+s.F*a(function(){r(1)}),"Object",o)}},"60dc":function(e,t,r){},"613e":function(e,t,r){e.exports=r.p+"img/mariadb.e16110bc.svg"},"6c4c":function(e,t,r){e.exports=r.p+"img/mysql.dd2a5a35.svg"},"777d":function(e,t,r){"use strict";var s=r("60dc"),i=r.n(s);i.a},7939:function(e,t,r){e.exports=r.p+"img/codeigniter.434bf735.svg"},"81bb":function(e,t,r){e.exports=r.p+"img/elasticsearch.3ecfa530.svg"},"8b97":function(e,t,r){var s=r("d3f4"),i=r("cb7c"),a=function(e,t){if(i(e),!s(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,s){try{s=r("9b43")(Function.call,r("11e9").f(Object.prototype,"__proto__").set,2),s(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,r){return a(e,r),t?e.__proto__=r:s(e,r),e}}({},!1):void 0),check:a}},"8bcb":function(e,t,r){e.exports=r.p+"img/redis.3c39fafe.svg"},9093:function(e,t,r){var s=r("ce10"),i=r("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return s(e,i)}},9401:function(e,t,r){e.exports=r.p+"img/ruby.514befa7.svg"},"9b19":function(e,t,r){e.exports=r.p+"img/logo.63a7d78d.svg"},a0ba:function(e,t,r){e.exports=r.p+"img/memcached.2bcccabf.svg"},a230:function(e,t,r){e.exports=r.p+"img/angular.e224f5ed.svg"},a88c:function(e,t,r){e.exports=r.p+"img/drupal.66089b06.svg"},aa77:function(e,t,r){var s=r("5ca1"),i=r("be13"),a=r("79e5"),o=r("fdef"),n="["+o+"]",c="​",l=RegExp("^"+n+n+"*"),p=RegExp(n+n+"*$"),d=function(e,t,r){var i={},n=a(function(){return!!o[e]()||c[e]()!=c}),l=i[e]=n?t(u):o[e];r&&(i[r]=l),s(s.P+s.F*n,"String",i)},u=d.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(p,"")),e};e.exports=d},b2e9:function(e,t,r){e.exports=r.p+"img/react.9a28da9f.svg"},b77f:function(e,t,r){e.exports=r.p+"img/apache.12c49354.svg"},c44f:function(e,t,r){e.exports=r.p+"img/perl.a025edb4.svg"},c502:function(e,t,r){e.exports=r.p+"img/nginx.eae76401.svg"},c5f6:function(e,t,r){"use strict";var s=r("7726"),i=r("69a8"),a=r("2d95"),o=r("5dbc"),n=r("6a99"),c=r("79e5"),l=r("9093").f,p=r("11e9").f,d=r("86cc").f,u=r("aa77").trim,f="Number",g=s[f],v=g,h=g.prototype,m=a(r("2aeb")(h))==f,b="trim"in String.prototype,k=function(e){var t=n(e,!1);if("string"==typeof t&&t.length>2){t=b?t.trim():u(t,3);var r,s,i,a=t.charCodeAt(0);if(43===a||45===a){if(r=t.charCodeAt(2),88===r||120===r)return NaN}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:s=2,i=49;break;case 79:case 111:s=8,i=55;break;default:return+t}for(var o,c=t.slice(2),l=0,p=c.length;l<p;l++)if(o=c.charCodeAt(l),o<48||o>i)return NaN;return parseInt(c,s)}}return+t};if(!g(" 0o1")||!g("0b1")||g("+0x1")){g=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof g&&(m?c(function(){h.valueOf.call(r)}):a(r)!=f)?o(new v(k(t)),r,g):k(t)};for(var I,j=r("9e1e")?l(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),y=0;j.length>y;y++)i(v,I=j[y])&&!i(g,I)&&d(g,I,p(v,I));g.prototype=h,h.constructor=g,r("2aba")(s,f,g)}},c6da:function(e,t,r){e.exports=r.p+"img/django.28fe09a0.svg"},c7ba:function(e,t,r){},ee3c:function(e,t,r){e.exports=r.p+"img/wordpress.b08e20e3.svg"},efa7:function(e,t,r){},f843:function(e,t,r){"use strict";var s=r("4661"),i=r.n(s);i.a},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},ff57:function(e,t,r){}}]);
//# sourceMappingURL=projectstack.65cca836.js.map